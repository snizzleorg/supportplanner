# Portainer-optimized Docker Compose file
# This file uses pre-built images from Gitea Registry (git.b.picoquant.com)
# See PORTAINER_DEPLOYMENT.md for complete deployment instructions
# Quick start: PORTAINER_QUICKSTART.md

services:
  support-planner:
    image: git.b.picoquant.com/ruettinger/support-planner:latest
    container_name: support-planner
    # Environment variables will be set via Portainer web interface
    # Go to: Stacks > [Your Stack] > Environment variables
    environment:
      # These will be populated from Portainer's environment variables section
      - OIDC_ISSUER_URL
      - OIDC_CLIENT_ID
      - OIDC_CLIENT_SECRET
      - OIDC_REDIRECT_URI
      - OIDC_SCOPES
      - OIDC_POST_LOGOUT_REDIRECT_URI
      - PORT
      - NEXTCLOUD_URL
      - NEXTCLOUD_USERNAME
      - NEXTCLOUD_PASSWORD
      - SESSION_SECRET
      - CSRF_SECRET
      - SKIP_SESSION_SECRET_CHECK=true
      - ALLOWED_ORIGINS
      - ADMIN_GROUPS
      - EDITOR_GROUPS
      - ADMIN_EMAILS
      - EDITOR_EMAILS
      - AUTH_DISABLED
      - AUTH_BYPASS_ROLE
      - LOG_LEVEL
      - BOT_TOKENS
    ports:
      - "5175:5173"
    volumes:
      - support-planner-data:/usr/src/support-planner/data
    dns:
      - 1.1.1.1
      - 8.8.8.8
    dns_search: .
    restart: always

volumes:
  support-planner-data:
    driver: local
